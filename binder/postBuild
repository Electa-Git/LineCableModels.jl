#!/usr/bin/env bash
set -euxo pipefail

# Speed & reliability tweaks
export JULIA_DEPOT_PATH="$HOME/.julia"

julia --project=binder -e '
using Pkg
Pkg.activate("binder")
# 1) Make the repo package available (local path)
Pkg.develop(PackageSpec(path=pwd()))
# 2) Instantiate & precompile to cut first-open latency
Pkg.instantiate()
Pkg.precompile()
'
